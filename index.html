<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>Informe DevOps - TransChile</title>
    <meta name="description" content="EV-M3 Juan Jos√© Abarca" />

    <!-- Pico.css -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.1.1/css/pico.min.css"
    />
    <link rel="icon" href="https://fav.farm/üöõ" />
  </head>
  <style>
    html {
      scroll-behavior: smooth;
      scroll-padding-top: 7rem;
    }
    p {
      text-align: justify;
    }
    
  </style>

  <body>
    <header
      class="container-fluid"
      style="
        position: sticky;
        top: 0;
        background: var(--pico-background-color);
        z-index: 1000;
        border-bottom: 1px solid var(--pico-secondary-background);
      "
    >
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: nowrap;
        "
      >
        <hgroup style="margin: 0">
          <h1>üöõ TransChile</h1>
          <p>üßæ EV-M3 | Juan J. Abarca</p>
        </hgroup>
        <nav>
          <ul style="display: flex; margin: 0">
            <li>
              <details class="dropdown">
                <summary role="button" class="secondary">üóÇÔ∏è</summary>
                <ul dir="rtl">
                  <li><a href="#contexto">Contexto</a></li>
                  <li><a href="#intro">Introducci√≥n</a></li>
                  <li><a href="#control-versiones">Git</a></li>
                  <li><a href="#ci-cd">CI/CD</a></li>
                  <li><a href="#seguridad">Seguridad</a></li>
                  <li><a href="#conclusion">Conclusi√≥n</a></li>
                </ul>
              </details>
            </li>
            <li>
              <details class="dropdown">
                <summary role="button" class="secondary">‚öôÔ∏è</summary>
                <ul dir="rtl">
                  <li><a href="#" data-theme-switcher="auto">üåì Auto</a></li>
                  <li><a href="#" data-theme-switcher="light">‚òÄÔ∏è Claro</a></li>
                  <li><a href="#" data-theme-switcher="dark">üåë Oscuro</a></li>
                </ul>
              </details>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container-fluid">
      <!-- Presentaci√≥n -->
      <blockquote>
        <h4>üëãüèª Antes de comenzar</h4>
        <small>
          Esta web fue creada con fines acad√©micos, todos los datos que se
          exponen no son reales. En esta se comparte la soluci√≥n a la
          problem√°tica de la
          <strong>Evaluaci√≥n del M√≥dulo 3</strong> del BootCamp Dev-Ops TD 2025.
        </small>
        <hr />
        <small>
          Puedes usar los botones de la zona superior derecha para interactuar
          con la web:
          <ul>
            <li>üóÇÔ∏è Navegar entre secciones.</li>
            <li>‚öôÔ∏è Ajustes de visualizaci√≥n.</li>
          </ul>
        </small>
        <footer>
          <cite>‚Äî Juan Jos√© Abarca</cite>
        </footer>
      </blockquote>

      <hr />

      <!-- Contexto -->
      <article id="contexto">
        <p>
          <details>
            <summary><strong>üéØ Contexto</strong></summary>
            <p>
              En la industria del transporte de mercanc√≠as, la optimizaci√≥n de
              procesos tecnol√≥gicos es clave para garantizar eficiencia,
              seguridad y rapidez en la entrega. La empresa TransChile se dedica
              al transporte de carga dentro de Chile y actualmente enfrenta
              problemas en su desarrollo de software, lo que impacta
              negativamente en la operaci√≥n log√≠stica.
            </p>
            <p>
              El equipo de desarrollo trabaja sin integraci√≥n continua, no
              cuenta con un flujo de trabajo estructurado ni herramientas de
              control de versiones adecuadas, lo que genera errores en
              producci√≥n, problemas de seguridad y falta de automatizaci√≥n en la
              entrega de software.
            </p>
            <p>
              Como especialista en DevOps, los estudiantes deber√°n evaluar el
              estado actual de la empresa y proponer soluciones en un informe
              estructurado.
            </p>
            <h4>Escenario de la Empresa TransChile</h4>
            <h5>
              Descripci√≥n del problema actual en el desarrollo de software:
            </h5>
            <ul>
              <li>
                <strong>Falta de control de versiones:</strong> Los
                desarrolladores trabajan en sus propios archivos sin un
                repositorio centralizado. Se re√∫nen una vez al mes para unir el
                c√≥digo manualmente y lo suben al servidor por FTP.
              </li>
              <li>
                <strong>Ausencia de un proceso de integraci√≥n continua:</strong>
                No utilizan herramientas como Jenkins, GitHub Actions o GitLab
                CI/CD para gestionar el ciclo de vida del software. No se
                ejecutan pruebas autom√°ticas antes de integrar los cambios en
                producci√≥n.
              </li>
              <li>
                <strong>Problemas de seguridad:</strong> La empresa ha
                experimentado ataques debido a la integraci√≥n de paquetes
                inseguros. No tienen un proceso de auditor√≠a de seguridad ni
                an√°lisis est√°tico de c√≥digo.
              </li>
              <li>
                <strong>Falta de an√°lisis de calidad de c√≥digo:</strong> No
                utilizan herramientas como SonarQube para detectar
                vulnerabilidades y errores. Han identificado errores en
                producci√≥n que podr√≠an haberse prevenido con un proceso adecuado
                de revisi√≥n.
              </li>
              <li>
                <strong>Flujo de trabajo ineficiente:</strong> No siguen una
                metodolog√≠a clara (Git Flow, GitHub Flow, Trunk-based
                Development). Cada desarrollador sube cambios sin revisi√≥n
                formal.
              </li>
            </ul>
          </details>
        </p>
      </article>

      <hr />

      <!-- Introducci√≥n -->
      <article id="intro">
        <p>
          <details>
            <summary>
              <strong>üìã Introducci√≥n y an√°lisis del estado actual</strong>
            </summary>
            <p>
              La empresa TransChile, dedicada al transporte de carga dentro del
              territorio nacional, enfrenta una serie de desaf√≠os tecnol√≥gicos
              que comprometen la calidad, seguridad y eficiencia de su
              desarrollo de software. Actualmente, su modelo de trabajo se basa
              en un enfoque manual y desestructurado que afecta gravemente la
              operaci√≥n log√≠stica.
            </p>

            <h3>üõ† Modelo actual de desarrollo</h3>
            <p>
              El equipo de desarrollo trabaja de manera aislada, sin un
              repositorio centralizado ni control de versiones. Cada
              desarrollador avanza en su entorno local y una vez al mes se
              realiza una reuni√≥n para unir manualmente los cambios. Esta fusi√≥n
              se realiza sin revisi√≥n de c√≥digo formal y se sube directamente al
              servidor de producci√≥n v√≠a FTP.
            </p>

            <h3>‚ùó Problemas cr√≠ticos en el proceso</h3>
            <ul>
              <li>
                No existen herramientas de integraci√≥n continua que aseguren el
                correcto funcionamiento del software antes de su despliegue.
              </li>
              <li>
                La ausencia de pruebas automatizadas permite que errores lleguen
                a producci√≥n sin ser detectados previamente.
              </li>
              <li>
                No se aplica an√°lisis est√°tico ni revisi√≥n de c√≥digo, lo que
                favorece la introducci√≥n de vulnerabilidades y bugs.
              </li>
              <li>
                El proceso de despliegue manual y sin control de versiones
                expone a la empresa a p√©rdidas de informaci√≥n y errores
                dif√≠ciles de rastrear.
              </li>
            </ul>

            <h3>‚ö†Ô∏è Impacto de la falta de control y automatizaci√≥n</h3>
            <p>
              La inexistencia de un sistema de control de versiones como Git
              impide tener trazabilidad, historial de cambios y colaboraci√≥n
              efectiva. La falta de automatizaci√≥n tambi√©n ralentiza la entrega
              de nuevas funcionalidades, incrementa los errores humanos y
              dificulta la recuperaci√≥n ante fallos. Esto se traduce en mayores
              costos operativos, p√©rdida de confianza por parte de los clientes
              y una menor competitividad en el mercado.
            </p>
          </details>
        </p>
      </article>

      <hr />

      <!-- Git -->
      <article id="control-versiones">
        <p>
          <details>
            <summary>
              <strong
                >üîÅ Propuesta de implementaci√≥n de Git y control de
                versiones</strong
              >
            </summary>
            <p>
              Existen varias metodolog√≠as para organizar el trabajo con Git.
              <strong>Git Flow</strong> establece ramas separadas para
              desarrollo, releases y hotfixes, siendo √∫til para proyectos con
              ciclos definidos. <strong>GitHub Flow</strong> es m√°s simple y
              continuo, trabajando directamente con <code>main</code> y ramas
              por feature. <strong>Trunk-based Development</strong>, por su
              parte, sugiere trabajar con una sola rama base y hacer entregas
              continuas, lo que requiere alto nivel de automatizaci√≥n y pruebas.
            </p>

            <h3>üîß Propuesta de control de versiones con Git</h3>
            <p>
              Se propone implementar una estructura de ramas basada en
              <strong>main</strong>, <strong>staging</strong> y
              <strong>develop</strong>:
            </p>
            <ul>
              <li>
                <strong>main:</strong> rama protegida que representa el estado
                estable en producci√≥n.
              </li>
              <li>
                <strong>staging:</strong> contiene los cambios listos para pasar
                a producci√≥n tras validaci√≥n funcional.
              </li>
              <li>
                <strong>develop:</strong> recibe los cambios que se est√°n
                integrando desde ramas de desarrollo.
              </li>
              <li>
                <strong>feature/*:</strong> ramas creadas desde
                <code>develop</code> para trabajar en funcionalidades
                espec√≠ficas, de forma aislada.
              </li>
            </ul>

            <h3>‚úÖ Justificaci√≥n del flujo recomendado</h3>
            <p>
              Actualmente, TransChile carece de versionamiento formal, lo que
              impide tener trazabilidad de cambios, control de errores y
              colaboraci√≥n efectiva. Con Git y esta estructura de ramas, cada
              funcionalidad se desarrollar√° de forma aislada y controlada,
              permitiendo identificar de forma precisa qu√© se hizo, cu√°ndo, por
              qui√©n y por qu√©.
            </p>
            <p>
              Adem√°s, este flujo facilita la automatizaci√≥n de pruebas: al crear
              una <code>feature/*</code>, se puede ejecutar una bater√≠a de
              pruebas unitarias. Al integrar a <code>develop</code>, se
              ejecutar√°n pruebas de integraci√≥n, y al pasar a
              <code>staging</code>, se validar√° el sistema de forma m√°s global
              con pruebas funcionales y de seguridad. Solo si todo pasa
              exitosamente, los cambios se promover√°n a <code>main</code> para
              su despliegue en producci√≥n.
            </p>
          </details>
        </p>
      </article>

      <hr />

      <!-- CI/CD -->
      <article id="ci-cd">
        <p>
          <details>
            <summary>
              <strong>üöÄ Implementaci√≥n de integraci√≥n continua (CI/CD)</strong>
            </summary>
            <p>
              Se ha elegido <strong>GitHub Actions</strong> como herramienta de
              CI/CD por su integraci√≥n nativa con el repositorio, soporte para
              Django y facilidad de uso. Permite automatizar procesos clave del
              ciclo de vida del software directamente desde la plataforma donde
              se aloja el c√≥digo.
            </p>

            <h3>üõ†Ô∏è Propuesta de pipeline CI/CD</h3>
            <p>
              El flujo considera los siguientes entornos de trabajo, de acuerdo
              a la estrategia de ramas:
            </p>
            <ul>
              <li>
                <strong>feature/*:</strong> Pruebas unitarias, an√°lisis de
                seguridad y revisi√≥n de estilo al subir cambios.
              </li>
              <li>
                <strong>develop:</strong> Pruebas integradas, escaneo de
                vulnerabilidades en dependencias y revisi√≥n de contenedores.
              </li>
              <li>
                <strong>staging:</strong> Se ejecutan pruebas funcionales,
                revisi√≥n de infraestructura y se genera un
                <strong>live preview</strong> de la app.
              </li>
              <li>
                <strong>main:</strong> Despliegue a producci√≥n solo si staging
                pasa todas las validaciones.
              </li>
            </ul>

            <h3>üîç Estrategias de calidad por etapa</h3>
            <ul>
              <li>
                <strong>Linting:</strong> Uso de <code>flake8</code> y
                <code>black</code> para mantener c√≥digo limpio.
              </li>
              <li>
                <strong>Testing:</strong> Se aplican pruebas unitarias,
                integraci√≥n y funcionales seg√∫n la rama.
              </li>
              <li>
                <strong>Seguridad:</strong> Uso de <code>bandit</code> para
                c√≥digo y <code>safety</code> para dependencias. Adem√°s, se
                incluye un escaneo de im√°genes Docker con
                <code>trivy</code> para detectar vulnerabilidades antes de
                desplegar.
              </li>
              <li>
                <strong>Entorno virtual:</strong> Se a√≠sla la instalaci√≥n de
                dependencias con entornos virtuales para asegurar consistencia.
              </li>
              <li>
                <strong>Preview:</strong> En staging, se despliega la app en un
                entorno temporal para revisi√≥n visual.
              </li>
            </ul>

            <h3>üìÑ Archivo <code>.github/workflows/django.yml</code></h3>
            <pre><code>name: CI/CD WebApp TransChile @ Django

on:
  push:
    branches:
      - develop
      - staging
      - main
  pull_request:
    branches:
      - develop
      - staging

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:14
        env:
          POSTGRES_DB: transchile
          POSTGRES_USER: user
          POSTGRES_PASSWORD: password
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    env:
      DJANGO_SECRET_KEY: testsecret
      DJANGO_DEBUG: true
      DATABASE_URL: postgres://user:password@localhost:5432/transchile

    steps:
      - name: Checkout c√≥digo
        uses: actions/checkout@v3

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Crear entorno virtual e instalar dependencias
        run: |
          python -m venv venv
          source venv/bin/activate
          pip install --upgrade pip
          pip install -r requirements.txt

      - name: Formateo de c√≥digo y lint
        run: |
          source venv/bin/activate
          black . --check
          flake8 .

      - name: An√°lisis de seguridad en c√≥digo y dependencias
        run: |
          source venv/bin/activate
          bandit -r .
          safety check --full-report

      - name: An√°lisis de imagen Docker
        run: |
          docker build -t transchile .
          docker run --rm aquasec/trivy image transchile

      - name: Ejecutar pruebas
        run: |
          source venv/bin/activate
          python manage.py migrate
          python manage.py test

  deploy-staging:
    if: github.ref == 'refs/heads/staging'
    needs: build-and-test
    runs-on: ubuntu-latest
    steps:
      - name: Despliegue en entorno staging (preview)
        run: echo "Aqu√≠ se desplegar√≠a a un entorno staging (ej: Docker o VPS)"

  deploy-prod:
    if: github.ref == 'refs/heads/main'
    needs: build-and-test
    runs-on: ubuntu-latest
    steps:
      - name: Despliegue a producci√≥n
        run: echo "Despliegue final a entorno production"
</code></pre>
          </details>
        </p>
      </article>

      <hr />

      <!-- Seguridad y an√°lisis est√°tico -->
      <article id="seguridad">
        <p>
          <details>
            <summary>
              <strong>üõ°Ô∏è Seguridad y an√°lisis est√°tico del c√≥digo</strong>
            </summary>
            <p>
              Se recomienda la integraci√≥n de <strong>SonarQube</strong> como
              herramienta principal de an√°lisis est√°tico del c√≥digo. Su uso
              permite detectar vulnerabilidades, bugs y code smells de forma
              anticipada. SonarQube puede ejecutarse autom√°ticamente en el
              pipeline de GitHub Actions tras la ejecuci√≥n de pruebas unitarias
              e integrarse con herramientas como <code>flake8</code> y
              <code>black</code> para reforzar la calidad del c√≥digo. Su
              interfaz gr√°fica facilita el seguimiento continuo de la salud del
              proyecto.
            </p>

            <h3>üõ†Ô∏è Estrategias para proteger la infraestructura</h3>
            <ul>
              <li>
                <strong>Entornos segmentados:</strong> Separar ambientes de
                desarrollo, staging y producci√≥n, restringiendo accesos seg√∫n
                entorno.
              </li>
              <li>
                <strong>Control de acceso:</strong> Aplicar el principio de
                m√≠nimo privilegio usando autenticaci√≥n multifactor y rotaci√≥n de
                tokens.
              </li>
              <li>
                <strong>Escaneo de contenedores:</strong> Usar herramientas como
                <code>Trivy</code> para detectar vulnerabilidades en im√°genes
                Docker.
              </li>
              <li>
                <strong>Auditor√≠a de cambios:</strong> Registrar eventos clave
                mediante logs para rastrear acciones cr√≠ticas en producci√≥n.
              </li>
            </ul>

            <h3>üö´ Paquetes inseguros y c√≥mo evitarlos</h3>
            <p>
              La integraci√≥n de paquetes desactualizados o comprometidos es una
              de las causas m√°s comunes de ataques en sistemas modernos. Para
              mitigar este riesgo se utilizar√°n herramientas como
              <code>Safety</code> (que verifica vulnerabilidades conocidas) y
              <code>pip-audit</code>, adem√°s de mantener dependencias bajo
              versionado estricto en el archivo <code>requirements.txt</code>.
            </p>
            <p>
              A futuro, se recomienda automatizar la revisi√≥n de dependencias
              con GitHub Dependabot, que permite recibir alertas cuando se
              detectan versiones inseguras en librer√≠as utilizadas.
            </p>

            <h3>‚öôÔ∏è Pipeline con an√°lisis de seguridad integrado</h3>
            <p>
              A continuaci√≥n se presenta una versi√≥n mejorada del archivo
              <code>django.yml</code> que incorpora los an√°lisis con SonarQube,
              Safety, Bandit, Trivy y pruebas unitarias, manteniendo buenas
              pr√°cticas de seguridad y calidad en el ciclo DevOps.
            </p>

            <pre><code>name: CI/CD WebApp TransChile @ Django

on:
  push:
    branches:
      - develop
      - staging
      - main
  pull_request:
    branches:
      - develop
      - staging

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:14
        env:
          POSTGRES_DB: transchile
          POSTGRES_USER: user
          POSTGRES_PASSWORD: password
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    env:
      DJANGO_SECRET_KEY: testsecret
      DJANGO_DEBUG: true
      DATABASE_URL: postgres://user:password@localhost:5432/transchile

    steps:
      - name: Checkout c√≥digo
        uses: actions/checkout@v3

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Crear entorno virtual e instalar dependencias
        run: |
          python -m venv venv
          source venv/bin/activate
          pip install --upgrade pip
          pip install -r requirements.txt

      - name: Formateo de c√≥digo y lint
        run: |
          source venv/bin/activate
          black . --check
          flake8 .

      - name: An√°lisis de seguridad en c√≥digo y dependencias
        run: |
          source venv/bin/activate
          bandit -r .
          safety check --full-report

      - name: An√°lisis de imagen Docker
        run: |
          docker build -t transchile .
          docker run --rm aquasec/trivy image transchile

      - name: Ejecutar pruebas unitarias
        run: |
          source venv/bin/activate
          python manage.py migrate
          python manage.py test

      - name: An√°lisis est√°tico con SonarQube
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
        run: |
          curl -sSLo sonar-scanner.zip https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip
          unzip sonar-scanner.zip
          export PATH=$PATH:$PWD/sonar-scanner-*/bin
          sonar-scanner \
            -Dsonar.projectKey=transchile \
            -Dsonar.sources=. \
            -Dsonar.python.version=3.11 \
            -Dsonar.host.url=${{ secrets.SONAR_HOST_URL }} \
            -Dsonar.login=${{ secrets.SONAR_TOKEN }}

  deploy-staging:
    if: github.ref == 'refs/heads/staging'
    needs: build-and-test
    runs-on: ubuntu-latest
    steps:
      - name: Despliegue en entorno staging (preview)
        run: echo "Aqu√≠ se desplegar√≠a a un entorno staging (ej: Docker o VPS)"

  deploy-prod:
    if: github.ref == 'refs/heads/main'
    needs: build-and-test
    runs-on: ubuntu-latest
    steps:
      - name: Despliegue a producci√≥n
        run: echo "Despliegue final a entorno productivo"
            </code></pre>
          </details>
        </p>
      </article>

      <hr />

      <article id="conclusion">
        <p>
          <details>
            <summary><strong>üì¶ Conclusi√≥n</strong></summary>
            <p>
              La transformaci√≥n digital propuesta para TransChile aborda de
              forma integral los principales desaf√≠os t√©cnicos y
              organizacionales del √°rea de desarrollo. La implementaci√≥n de Git
              como sistema de control de versiones, junto a una estrategia de
              ramas clara, permite establecer orden y trazabilidad en el ciclo
              de vida del software.
            </p>
            <p>
              El pipeline CI/CD dise√±ado con GitHub Actions garantiza que cada
              cambio pase por una serie de validaciones autom√°ticas, incluyendo
              pruebas, an√°lisis est√°tico de c√≥digo, escaneo de dependencias y
              revisi√≥n de im√°genes Docker. Esto permite detectar errores de
              forma temprana y reducir riesgos antes del despliegue a
              producci√≥n.
            </p>
            <p>
              Por √∫ltimo, la incorporaci√≥n de SonarQube y herramientas de
              seguridad refuerza la postura de ciberseguridad de la
              organizaci√≥n, asegurando que el c√≥digo cumpla con est√°ndares de
              calidad y minimizando vulnerabilidades. Todo esto contribuye a
              mejorar la eficiencia, la confianza en el producto y la
              competitividad de TransChile en el mercado.
            </p>
            <footer>
              <cite>‚Äî Juan Jos√© Abarca</cite>
            </footer>
          </details>
        </p>
      </article>
    </main>
    <script src="js/minimal-theme-switcher.js"></script>
  </body>
</html>
